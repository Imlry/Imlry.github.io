---
title: MySQL数据类型总结
date: 2019-03-13 10:52:50
tags:
  - mysql
  - 数据库
---

对MySQL数据类型INT、FLOAT、DOUBLE、YEAR、DATE等的学习和记录。

<!-- more -->

## 整数类型

| 类型         | 占用空间 | 有符号数值范围       | 无符号数值范围 |
| ------------ | -------- | -------------------- | -------------- |
| TINYINT      | 1字节    | (-2^7) ~ (2^7 - 1)   | 0 ~ (2^8 - 1)  |
| SMALLINT     | 2字节    | (-2^15) ~ (2^15 - 1) | 0 ~ (2^16 - 1) |
| MEDIUMINT    | 3字节    | (-2^23) ~ (2^23 - 1) | 0 ~ (2^24 - 1) |
| INT(INTEGER) | 4字节    | (-2^31) ~ (2^31 - 1) | 0 ~ (2^32 - 1) |
| BIGINT       | 8字节    | (-2^63) ~ (2^63 - 1) | 0 ~ (2^64 - 1) |

创建表时，可以指定显示宽度，比如：

```sql
CREATE TABLE test_table (id1 INT(11));
```

我之前误以为这个11是存储位数，但是其实这里的11只是控制交互工具显示的宽度而已。

如果不指定显示宽度，那么会有一个默认的显示宽度存在，这个宽度可以保证每种数据类型可以保证可与显示该范围之内的所有值（如果是有负号数的话，包括负号的长度）。

如果数值的长度大于显示宽度，那么不会影响该数值的显示。如果小于显示宽度的话，就默认在左边补空格。

## 浮点数和定点数类型

浮点数：单精度浮点数(FLOAT)和双精度(DOUBLE)。

定点数：DECIMAL。

浮点数和定点数都可以用（M, N）来表示，其中M称为精度，表示总共的位数；N称为标度，表示小数的位数。比如DECIMAL(18, 9) 表示总共18位，取9位存储小数部分，剩下9位存储整数部分。

FLOAT占用4个字节，DOUBLE占用8个字节，DECIMAL占用M+2个字节。

FLOAT和DOUBLE在不指定精度时，默认会由计算机硬件和操作系统决定。DECIMAL如不指定，默认为(10, 0)。

CPU原生支持浮点数运算，但是不支持定点数运算，因为在MySQL里，定点数以字符串形式存储。

在对精度要求比较高的时候（如货币、科学数据等），使用DECIMAL类型比较好。

## 日期和时间类型

| 类型      | 占用空间 | 日期格式            | 日期范围                                          |
| --------- | -------- | ------------------- | ------------------------------------------------- |
| YEAR      | 1字节    | YYYY                | 1901 ~ 2155                                       |
| TIME      | 3字节    | HH:MM:SS            | -838:59:59 ~ 838:59:59                            |
| DATE      | 3字节    | YYYY-MM-DD          | 1000-01-01 ~ 9999-12-3                            |
| DATETIME  | 8字节    | YYYY-MM-DD HH:MM:SS | 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59         |
| TIMESTAMP | 4字节    | YYYY-MM-DD HH:MM:SS | 1970-01-01 00:00:00 UTC ~ 2038-01-19 03:14:07 UTC |

MySQL 允许不严格语法：任何标点符号都可以用作日期部分或时间部分之间的间隔符。

TIMESTAMP存储和查询时，都会根据当前的时区进行转换。

## 文本字符串类型

| 类型名称   | 占用空间                                    | 说明             |
| ---------- | ------------------------------------------- | ---------------- |
| CHAR(M)    | M字节，1<=M<=255                            | 固定长度的字符串 |
| VARCHAR(M) | L+1字节，L<=M且1<=M<=65535                  | 变长字符串       |
| TINYTEXT   | L+1字节，L<2^8                              |                  |
| TEXT       | L+2字节，L<2^16                             |                  |
| MEDIUMTEXT | L+3字节，L<2^24                             |                  |
| LONGTEXT   | L+4字节，L<2^32                             |                  |
| ENUM       | 1或2个字节，取决于枚举值的数目(最大值65535) | 枚举类型         |
| SET        | 1、2、3、4或8个字节，取决于集合成员的数量   | 集合             |

VARCHAR和TEXT是变长类型，其实际存储需求取决于列值的实际长度。比如一列是VARCHAR(10)，存储了"abcd"的时候，L为4，占用的空间为5个字节，多出来的一个字节用来记录字符串的长度。

CHAR是固定长度的类型，在定义时指定长度。

VARCHAR的实际长度由最长的行的大小和使用的字符集确定。

CHAR在保存时，如果长度不够就在右侧填充空格；在检索时尾部的空格将被删除。而VARCHAR在保存和检索时尾部的空格仍然保留。

ENUM和SET以字符串形式出现，但是在MySQL内部以数值的形式存储。

## 二进制字符串类型

| 类型名称      | 占用空间          | 说明                 |
| ------------- | ----------------- | -------------------- |
| BIT(M)        | 大约(M+7)/8个字节 | 位字段类型           |
| BINARY(M)     | M个字节           | 固定长度二进制字符串 |
| VARBINARY(M)  | M+1个字节         | 可变长度二进制字符串 |
| TINYBLOB(M)   | L+1字节，L<2^8    |                      |
| BLOB(M)       | L+2字节，L<2^16   |                      |
| MEDIUMBLOB(M) | L+3字节，L<2^24   |                      |
| LONGBLOB(M)   | L+4字节，L<2^32   |                      |

## 如何选择存储类型

为了优化存储，提高数据库的性能，在任何情况下均应使用最精确的类型。即在所有可以表示该列的类型中，该类型使用的存储最少。可以简略总结如下：

- 如果不需要小数部分，则选择整数类型；如果需要小数部分，则选择浮点数类型。如果精确度要求不高，则选择FLOAT类型；如果精确度要求高，则选择DOUBLE类型。如果要更高的精确度要求，以及要进行数值比较的话，可以选择DECIMAL类型。
- 如果只需要记录年份，则选择YEAR类型；只记录日期，则选择DATE类型；只记录时间，则选择TIME类型；如果同时记录日期和时间，如果范围小的选择TIMESTAMP，大的选择DATETIME。
- 对于MyISAM存储引擎，最好使用固定长度的数据列代替可变长度的数据列，这样可以使整个表静态化，从而使数据检索更快，用空间换时间。
- 对于InnoDB存储引擎，使用可变长度的数据列，因为InnoDB数据表的存储格式不分固定长度和可变长度，因此使用CHAR不一定比VARCHAR更好，但是由于VARCHAR是按照实际的长度存储，比较节省空间，所以对磁盘I/O和数据存储比较好。
- ENUM类型的例子：性别字段，只能取`男`或者`女`。
- SET类型的例子：存储某人的兴趣爱好。
- 二进制字符串用来存储图片、音频等二进制数据，文本字符串用来存储文本数据。

